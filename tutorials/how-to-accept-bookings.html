
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>How to accept bookings? Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-insert-logo-link/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-callouts/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../apis.html" />
    
    
    <link rel="prev" href="how-to-publish-many-hotels.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../tutorials.html">
            
                <a href="../tutorials.html">
            
                    
                    Tutorials
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="how-to-publish-inventory.html">
            
                <a href="how-to-publish-inventory.html">
            
                    
                    How to publish Inventory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="how-to-retrieve-inventory.html">
            
                <a href="how-to-retrieve-inventory.html">
            
                    
                    How to retrieve Inventory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="how-to-setup-write-api.html">
            
                <a href="how-to-setup-write-api.html">
            
                    
                    How to setup Winding Tree Write API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="how-to-secure-write-api.html">
            
                <a href="how-to-secure-write-api.html">
            
                    
                    How to keep the Write API secure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="how-to-setup-read-api.html">
            
                <a href="how-to-setup-read-api.html">
            
                    
                    How to setup Winding Tree Read API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="how-to-generate-ethereum-wallet.html">
            
                <a href="how-to-generate-ethereum-wallet.html">
            
                    
                    How to generate Ethereum wallet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="how-to-get-first-ether.html">
            
                <a href="how-to-get-first-ether.html">
            
                    
                    How to get first Ether (ETH)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="how-to-build-a-booking-page.html">
            
                <a href="how-to-build-a-booking-page.html">
            
                    
                    How to build a Hotel Booking Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="how-to-pick-off-chain-storage.html">
            
                <a href="how-to-pick-off-chain-storage.html">
            
                    
                    How to pick na appropriate off-chain storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="how-to-pick-environment.html">
            
                <a href="how-to-pick-environment.html">
            
                    
                    How to pick an environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="how-much-does-it-cost.html">
            
                <a href="how-much-does-it-cost.html">
            
                    
                    How much does it cost to publish Inventory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="how-to-publish-entire-hotel.html">
            
                <a href="how-to-publish-entire-hotel.html">
            
                    
                    How to publish inventory for an entire hotel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="how-to-publish-many-hotels.html">
            
                <a href="how-to-publish-many-hotels.html">
            
                    
                    How to publish inventory for many hotels
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.14" data-path="how-to-accept-bookings.html">
            
                <a href="how-to-accept-bookings.html">
            
                    
                    How to accept bookings?
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../apis.html">
            
                <a href="../apis.html">
            
                    
                    APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../tooling.html">
            
                <a href="../tooling.html">
            
                    
                    Tooling and integrations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../data-model.html">
            
                <a href="../data-model.html">
            
                    
                    Data Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../architectural-overview.html">
            
                <a href="../architectural-overview.html">
            
                    
                    Architectural Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../GLOSSARY.html">
            
                <a href="../GLOSSARY.html">
            
                    
                    Glossary of Terms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../faq.html">
            
                <a href="../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    


<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >How to accept bookings?</a>
    </h1>
</div>

  <script type="text/javascript">
    window.intergramId = "-1001171733386";
    window.intergramServer = 'https://bot-intergram.windingtree.com';
    window.intergramCustomizations = {
      closedStyle: 'button', // button or chat
      closedChatAvatarUrl: 'https://raw.githubusercontent.com/windingtree/wt-media/master/logo-variants/tree/png/tree--gradient-on-white.png',  // only used if closedStyle is set to 'chat'
      cookieExpiration: 1, // in days. Once opened, closed chat title will be shown as button (when closedStyle is set to 'chat')
      titleClosed: 'Ask us anything!',
      titleOpen: 'Winding Tree tech team',
      introMessage: 'Feel free to ask anything regarding this documentation!',
      autoResponse: 'Thank you! We will get back to you as soon as we can.',
      autoNoResponse: 'Huh... It looks like nobody is listening at the moment. Leave us a more permanent contact (e-mail will do) and somebody will reach out to you.',
      mainColor: "#18e9a6", // Can be any css supported color 'red', 'rgb(255,87,34)', etc
      alwaysUseFloatingButton: false, // Use the mobile floating button also on large screens
      displayMessageTime: true, // Show or hide time indicators in the chat window
      displayBanner: true, // Show or hide banner on the bottom side of the chat window
      desktopHeight: 500, // Height of the chat window on desktop
      desktopWidth: 370, // Width of the chat window on desktop
    };
  </script>
  <script id="intergram" type="text/javascript" src="https://bot-intergram.windingtree.com/js/widget.js"></script>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NP8LM54');</script>
  <!-- End Google Tag Manager -->
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NP8LM54"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <blockquote>
<p><em>Last modified: Wed Feb 13 2019 14:26:14 GMT+0000 (Coordinated Universal Time)</em></p>
</blockquote>
<h1 id="how-to-accept-bookings">How to accept bookings?</h1>
<p>In this tutorial, you will learn about the booking process
in Winding Tree ecosystem.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Working with the Write API<div class="panel panel-info"><div class="panel-heading"><h3 class="panel-title" id="info"><i class="fa fa-info"></i> Info</h3></div><div class="panel-body"><p>Learn how to <a href="how-to-publish-inventory.html">publish inventory</a></p></div></div>
</li>
</ul>
<h2 id="step-by-step">Step by step</h2>
<p>Booking in Winding Tree ecosystem is done in a decentralized way.
Every hotel should advertise a <code>bookingUri</code> in its data published
through Write API. This <code>bookingUri</code> should be pointing to REST
API which is implementing the booking protocol.</p>
<h3 id="booking-protocol">Booking protocol</h3>
<p>The booking protocol is really just a description of the REST API.
It currently contains an endpoint to create new booking and an
endpoint to cancel an existing one.</p>
<p>Because this booking scheme is totally decentralized, stateless
and may be quite disconnected in time from the actual offer published
on Winding Tree, the booking request should contain all of the data that
the traveller and the provider agree on.</p>
<p>First, it contains information about the customer itself. Optional fields
include a postal <code>address</code> and <code>phone</code>. It is absolutely necessary that
the provider gets a means of contact with the actual customer.</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;customer&quot;</span>: {
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Elizabeth&quot;</span>,
    <span class="hljs-string">&quot;surname&quot;</span>: <span class="hljs-string">&quot;Crown&quot;</span>,
    <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;elizabeth@example.com&quot;</span>
  }
}
</code></pre>
<p>Then there&apos;s the information about the booking itself. It contains mainly
information about the guests and which rooms were booked. It is even ready
for allocating guests into particular rooms.</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;booking&quot;</span>: {
    <span class="hljs-string">&quot;arrival&quot;</span>: <span class="hljs-string">&quot;2019-02-03&quot;</span>,
    <span class="hljs-string">&quot;departure&quot;</span>: <span class="hljs-string">&quot;2019-02-10&quot;</span>,
    <span class="hljs-string">&quot;guestInfo&quot;</span>: [
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;guest-0&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Elizabeth&quot;</span>, <span class="hljs-string">&quot;surname&quot;</span>: <span class="hljs-string">&quot;Crown&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>
      },
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;guest-1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Philip&quot;</span>, <span class="hljs-string">&quot;surname&quot;</span>: <span class="hljs-string">&quot;Crown&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>
      }
    ],
    <span class="hljs-string">&quot;rooms&quot;</span>: [
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;room-1&quot;</span>,
        <span class="hljs-string">&quot;guestInfoIds&quot;</span>: [<span class="hljs-string">&quot;guest-0&quot;</span>, <span class="hljs-string">&quot;guest-1&quot;</span>]
      }
    ]
  }
}
</code></pre>
<p>And finally the information about the price that the guest is proposing to the
hotel. Apart from the total price, this also contains information about
possible cancellation fees. A hotel can refuse to accept the booking if the
submitted price is just not acceptable.</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;pricing&quot;</span>: {
    <span class="hljs-string">&quot;currency&quot;</span>: <span class="hljs-string">&quot;EUR&quot;</span>,
    <span class="hljs-string">&quot;total&quot;</span>: <span class="hljs-number">100</span>,
    <span class="hljs-string">&quot;cancellationFees&quot;</span>: [
      {
        <span class="hljs-string">&quot;from&quot;</span>: <span class="hljs-string">&quot;2019-02-01&quot;</span>,
        <span class="hljs-string">&quot;to&quot;</span>: <span class="hljs-string">&quot;2019-02-03&quot;</span>,
        <span class="hljs-string">&quot;amount&quot;</span>: <span class="hljs-number">50</span>
      }
    ]
  }
}
</code></pre>
<p>All of this information combined (also with the appropriate <code>hotelId</code> and an
optional textual note) will be sent to the appropriate endpoint on the
declared <code>bookingUri</code>.</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;customer&quot;</span>: {
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Elizabeth&quot;</span>,
    <span class="hljs-string">&quot;surname&quot;</span>: <span class="hljs-string">&quot;Crown&quot;</span>,
    <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;elizabeth@example.com&quot;</span>
  },
  <span class="hljs-string">&quot;booking&quot;</span>: {
    <span class="hljs-string">&quot;arrival&quot;</span>: <span class="hljs-string">&quot;2019-02-03&quot;</span>,
    <span class="hljs-string">&quot;departure&quot;</span>: <span class="hljs-string">&quot;2019-02-10&quot;</span>,
    <span class="hljs-string">&quot;guestInfo&quot;</span>: [
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;guest-0&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Elizabeth&quot;</span>, <span class="hljs-string">&quot;surname&quot;</span>: <span class="hljs-string">&quot;Crown&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">25</span>
      },
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;guest-1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Philip&quot;</span>, <span class="hljs-string">&quot;surname&quot;</span>: <span class="hljs-string">&quot;Crown&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>
      }
    ],
    <span class="hljs-string">&quot;rooms&quot;</span>: [
      {
        <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;room-1&quot;</span>,
        <span class="hljs-string">&quot;guestInfoIds&quot;</span>: [<span class="hljs-string">&quot;guest-0&quot;</span>, <span class="hljs-string">&quot;guest-1&quot;</span>]
      }
    ]
  },
  <span class="hljs-string">&quot;pricing&quot;</span>: {
    <span class="hljs-string">&quot;currency&quot;</span>: <span class="hljs-string">&quot;EUR&quot;</span>,
    <span class="hljs-string">&quot;total&quot;</span>: <span class="hljs-number">100</span>,
    <span class="hljs-string">&quot;cancellationFees&quot;</span>: [
      {
        <span class="hljs-string">&quot;from&quot;</span>: <span class="hljs-string">&quot;2019-02-01&quot;</span>,
        <span class="hljs-string">&quot;to&quot;</span>: <span class="hljs-string">&quot;2019-02-03&quot;</span>,
        <span class="hljs-string">&quot;amount&quot;</span>: <span class="hljs-number">50</span>
      }
    ]
  }
}
</code></pre>
<pre><code class="lang-sh">$ curl -X POST https://hotel-booking.com/booking \
  -H <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json&apos;</span> \
  --data @booking.json

{
  <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;some-booking-reference&quot;</span>,
  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;confirmed&quot;</span>
}
</code></pre>
<p>The booking server should of course validate all of the incoming data
and if the proposed conditions are OK with the hotel, it should accept
the booking. It can either make it <code>confirmed</code> or just <code>pending</code> which
means that there might be another process in place.</p>
<h3 id="sample-booking-api">Sample Booking API</h3>
<p>We have a <a href="https://github.com/windingtree/wt-booking-api" target="_blank">sample implementation</a>
in NodeJS alongside the Booking protocol specification. <em>It is definitely
not meant for any production use</em>, but merely as a demonstration of what
should be going on in a custom implementation of Booking API.</p>
<p>If you already have a Booking system, it should be only a matter of implementing
a data format adapter.</p>
<h2 id="where-to-next">Where to next</h2>
<ul>
<li><a href="how-to-build-a-booking-page.html">How to build a Booking page</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="how-to-publish-many-hotels.html" class="navigation navigation-prev " aria-label="Previous page: How to publish inventory for many hotels">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../apis.html" class="navigation navigation-next " aria-label="Next page: APIs">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"How to accept bookings?","level":"1.2.14","depth":2,"next":{"title":"APIs","level":"1.3","depth":1,"path":"apis.md","ref":"apis.md","articles":[]},"previous":{"title":"How to publish inventory for many hotels","level":"1.2.13","depth":2,"path":"tutorials/how-to-publish-many-hotels.md","ref":"tutorials/how-to-publish-many-hotels.md","articles":[]},"dir":"ltr"},"config":{"plugins":["insert-logo-link","last-modified","callouts"],"root":"book","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"last-modified":{},"callouts":{},"insert-logo-link":{"src":"https://docs.windingtree.com/assets/logo.svg","url":"https://docs.windingtree.com/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"tutorials/how-to-accept-bookings.md","mtime":"2019-02-13T14:26:14.699Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-13T14:27:26.682Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-insert-logo-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

